[program:click-translate-relay]
; 使用 uv 运行 gunicorn，配合 uvicorn worker 启动 FastAPI 应用
command=/usr/local/bin/uv run gunicorn -k uvicorn.workers.UvicornWorker -w 2 -b 0.0.0.0:12032 main:app
directory=/Users/Zhuanz/Projects/click-translate/backend
user=zhuanz
autostart=true
autorestart=true
startretries=3
startsecs=5
redirect_stderr=true
stdout_logfile=/var/log/supervisor/click-translate-relay.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stopasgroup=true
killasgroup=true

; 环境变量配置
environment=
    PORT="12032",
    RELAY_API_KEY="%(ENV_RELAY_API_KEY)s"

; 进程优先级
priority=999

; 停止信号
stopsignal=TERM

; 停止等待时间
stopwaitsecs=10